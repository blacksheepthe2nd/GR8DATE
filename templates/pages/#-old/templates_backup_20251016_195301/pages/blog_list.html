<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>GR8Date Blog</title>
  <link rel="stylesheet" href="/static/css/site.css">
  <style>
    .blog-wrap{max-width:1100px;margin:0 auto;padding:1.25rem}
    .blog-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:1rem}
    @media (max-width:900px){.blog-grid{grid-template-columns:repeat(2,1fr)}}
    @media (max-width:640px){.blog-grid{grid-template-columns:1fr}}
    .blog-card{border:1px solid #e9edf2;border-radius:12px;background:#fff;display:flex;flex-direction:column;overflow:hidden}
    .blog-thumb{width:100%;aspect-ratio:16/9;object-fit:cover;display:block}
    .blog-body{padding:.9rem 1rem;display:flex;flex-direction:column;gap:.5rem}
    .blog-title{font-size:1.05rem;font-weight:700;margin:0;color:#111}
    .blog-date{font-size:.85rem;color:#667085}
    .blog-excerpt{color:#555;line-height:1.5}
    .blog-actions{display:flex;justify-content:flex-end;margin-top:.4rem}
    .btn-read{display:inline-block;background:#ea3a6d;color:#fff;border-radius:999px;padding:.45rem .9rem;text-decoration:none;font-weight:600}
    /* kill any duplicate date decorations */
    .blog-date::before,.blog-date::after,.blog-date *::before,.blog-date *::after{content:none!important;display:none!important}
  </style>
</head>
<body>
  <header class="gd-header">
    <div class="gd-wrap">
      <a class="gd-brand" href="/"><img alt="GR8Date Logo" class="logo-img" src="/static/images/gr8date-logo-desktop.svg"/></a>
      <nav class="gd-nav"><a class="gd-login" href="/login/">Login</a><a class="gd-cta" href="/join/">Join Free Now</a></nav>
    </div>
  </header>

  <main class="blog-wrap">
    <h1 style="margin:.5rem 0 1rem;">Latest from the GR8Date Blog</h1>

    <section class="blog-grid">
      {% for post in page_obj.object_list %}
        <article class="blog-card">
          <a href="/blog/{{ post.slug }}/">
            {% if post.hero_image %}
              <img class="blog-thumb" src="{{ post.hero_image.url }}" alt="{{ post.title }}" onerror="this.onerror=null;this.src='/static/images/images/image1.jpg';"/>
            {% else %}
              <img class="blog-thumb" src="/static/images/images/image1.jpg" alt="{{ post.title }}"/>
            {% endif %}
          </a>
          <div class="blog-body">
            <a class="blog-title" href="/blog/{{ post.slug }}/">{{ post.title }}</a>
            <div class="blog-date">{{ post.published_at|date:"d M Y" }}</div>
            <p class="blog-excerpt">
              {{ post.excerpt|default:post.content|default:""|striptags|truncatewords:26 }}
            </p>
            <div class="blog-actions"><a class="btn-read" href="/blog/{{ post.slug }}/">Read more</a></div>
          </div>
        </article>
      {% empty %}
        <p>No posts yet. <a href="/admin/">Add one in admin</a>.</p>
      {% endfor %}
    </section>

    {% if is_paginated %}
      <nav class="pager" aria-label="Blog pagination" style="display:flex;gap:.5rem;justify-content:center;margin:1.25rem 0">
        {% if page_obj.has_previous %}
          <a href="?page=1">&laquo; First</a>
          <a href="?page={{ page_obj.previous_page_number }}">Prev</a>
        {% else %}
          <span class="disabled">&laquo; First</span>
          <span class="disabled">Prev</span>
        {% endif %}
        <span class="current">Page {{ page_obj.number }} of {{ page_obj.paginator.num_pages }}</span>
        {% if page_obj.has_next %}
          <a href="?page={{ page_obj.next_page_number }}">Next</a>
          <a href="?page={{ page_obj.paginator.num_pages }}">Last &raquo;</a>
        {% else %}
          <span class="disabled">Next</span>
          <span class="disabled">Last &raquo;</span>
        {% endif %}
      </nav>
    {% endif %}
  </main>
</body>
</html>

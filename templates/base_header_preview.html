<!-- templates/base_header_preview.html -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>{% block title %}GR8DATE - Preview{% endblock %}</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  
  <style>
    :root{
      --bg:#f7f7fb; --card:#fff; --border:#ececf3; --text:#1f2328; --muted:#6b7280;
      --brand:#ff3366; --brand-600:#ff2366; --radius:18px; --shadow:0 12px 26px rgba(15,23,42,.06)
    }
    *{box-sizing:border-box} html,body{margin:0;padding:0}
    body{font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;background:var(--bg);color:var(--text)}
    a{color:inherit;text-decoration:none}

    /* Header Styles */
    .site-header{
      position:fixed; top:0; left:0; right:0; z-index:1000;
      background:#fff; border-bottom:1px solid var(--border);
      box-shadow:0 1px 0 rgba(15,23,42,.02);
    }
    .nav{max-width:1200px;margin:0 auto;padding:10px 16px;display:flex;align-items:center;gap:12px;min-height:56px}
    
    /* Desktop header layout */
    .brand{font-weight:800; letter-spacing:.2px; font-size:22px; margin-right:auto}
    .brand .date{color:var(--brand)}
    .top-icons{display:flex; gap:10px; align-items:center}
    
    /* Mobile header layout */
    @media (max-width: 768px) {
      .nav{flex-direction:column;gap:8px;padding:8px 12px;min-height:auto}
      .brand{margin-right:0;order:1;text-align:center;width:100%}
      .top-icons{order:2;justify-content:center;flex-wrap:wrap;gap:8px;width:100%}
    }
    
    .icon-btn{
      position:relative;
      display:inline-flex; align-items:center; justify-content:center;
      width:40px; height:40px; border-radius:12px; background:#fff;
      border:1px solid var(--border); box-shadow:var(--shadow);
      transition:transform .12s ease, box-shadow .12s ease;
    }
    .icon-btn:hover{transform:translateY(-1px); box-shadow:0 12px 24px rgba(15,23,42,.12)}
    .icon-btn .material-icons{font-size:22px}
    .rot-90{transform: rotate(90deg); display:inline-block}

    /* Disabled icon styles */
    .icon-btn.preview-disabled {
      opacity: 0.3;
      cursor: not-allowed;
      pointer-events: none;
    }
    .icon-btn.preview-disabled:hover {
      transform: none;
      box-shadow: var(--shadow);
    }

    .badge{position:absolute;top:4px;right:6px;min-width:16px;height:16px;
      background:#ff5478;color:#fff;font-size:10px;font-weight:700;border-radius:999px;
      display:flex;align-items:center;justify-content:center}
    .flash{animation:pulse 1.4s ease-in-out infinite}
    @keyframes pulse{0%,100%{transform:scale(1);opacity:1}50%{transform:scale(1.3);opacity:.7}}

    .spacer{height:56px;}
    
    /* Mobile spacer adjustment */
    @media (max-width: 768px) {
      .spacer{height:96px} /* Increased for stacked header */
    }

    /* Content Styles */
    .container{max-width:1100px;margin:0 auto;padding:16px}
    
    {% block extra_css %}{% endblock %}
  </style>
</head>
<body>

<!-- Consistent Header -->
<header class="site-header">
  <div class="nav">
    <div class="brand"><span>GR8</span><span class="date">DATE</span></div>

    <div class="top-icons" aria-label="Header actions">
      <!-- Active Icons -->
      <a class="icon-btn" href="{% url 'browse_preview' %}" title="Browse">
        <span class="material-icons rot-90">u_turn_left</span>
      </a>
      
      <!-- Disabled Icons -->
      <span class="icon-btn preview-disabled" title="Search - Complete profile to enable">
        <span class="material-icons">search</span>
      </span>
      <span class="icon-btn preview-disabled" title="Messages - Complete profile to enable">
        <span class="material-icons">mail</span>
      </span>
      <span class="icon-btn preview-disabled" title="Matches - Complete profile to enable">
        <span class="material-icons">groups</span>
      </span>
      <span class="icon-btn preview-disabled" title="Hot Dates - Complete profile to enable">
        <span class="material-icons">local_fire_department</span>
      </span>
      <span class="icon-btn preview-disabled" title="My Profile - Complete profile to enable">
        <span class="material-icons">person</span>
      </span>
      
      <!-- Active Icon -->
      <a class="icon-btn" href="#" id="logout-btn" title="Logout">
        <span class="material-icons">logout</span>
      </a>
    </div>
  </div>
</header>

<div class="spacer"></div>

<main class="container">
  {% block content %}{% endblock %}
</main>

<!-- Logout Confirmation Modal -->
<div id="logoutModal" class="logout-modal">
  <div class="logout-modal-content">
    <h3>Log Out?</h3>
    <p>Are you sure you want to log out? You'll need to log in again to access your account.</p>
    <div class="logout-modal-buttons">
      <button class="logout-btn logout-cancel" id="logoutCancel">Cancel</button>
      <a href="{% url 'logout' %}" class="logout-btn logout-confirm" id="logoutConfirm">Log Out</a>
    </div>
  </div>
</div>

<script>
// Universal Logout Confirmation
document.addEventListener('DOMContentLoaded', function() {
  const logoutBtn = document.getElementById('logout-btn');
  const logoutModal = document.getElementById('logoutModal');
  const logoutCancel = document.getElementById('logoutCancel');

  if (logoutBtn && logoutModal) {
    // Open modal when logout button is clicked
    logoutBtn.addEventListener('click', function(e) {
      e.preventDefault();
      logoutModal.style.display = 'flex';
      document.body.style.overflow = 'hidden';
    });

    // Close modal when cancel button is clicked
    logoutCancel.addEventListener('click', function() {
      logoutModal.style.display = 'none';
      document.body.style.overflow = '';
    });

    // Close modal when clicking outside
    logoutModal.addEventListener('click', function(e) {
      if (e.target === logoutModal) {
        logoutModal.style.display = 'none';
        document.body.style.overflow = '';
      }
    });

    // Close with ESC key
    document.addEventListener('keydown', function(e) {
      if (e.key === 'Escape' && logoutModal.style.display === 'flex') {
        logoutModal.style.display = 'none';
        document.body.style.overflow = '';
      }
    });
  }
});
</script>

{% block extra_js %}{% endblock %}
</body>
</html>
